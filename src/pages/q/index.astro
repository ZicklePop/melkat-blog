---
import PageHeader from "../../components/page-header.astro";
import SearchResults from "../../components/search-results.astro";
import Search from "../../components/search.astro";
import Layout from "../../layouts/base-layout.astro";
---

<Layout title="melkat.blog - Search" showSearch={false}>
  <PageHeader>
    <label for="search">Search</label>
  </PageHeader>
  <Search />
  <SearchResults />
</Layout>
<script is:inline>
  const params = new URLSearchParams(document.location.search)
  const query = params.get('q')
  const searchEl = document.getElementById('search')
  const hasValue = !!searchEl.value
  if (query && searchEl && !hasValue) {
    searchEl.value = query
  }
</script>
