---
import Layout from './base-layout.astro'
import Article from '../components/article.astro'
import { title as blogTitle } from '../consts/config'

export interface Props {
  content: {
    title: string
    cover: string
    id: string
    date: string
  }
}

const { content } = Astro.props
const { title, cover, id } = content

const permalink = `/p/${id}`
const isPermalink = `${Astro.url}`.indexOf('/p/') > -1
const Component = isPermalink ? Layout : Fragment
---

<Component
  cover={cover}
  description={Astro.props.rawContent().split('\n')[0]}
  permalink={permalink}
  title={`${blogTitle} - ${title}`}
>
  <Article url={permalink} {...content}>
    <Fragment set:html={Astro.props.compiledContent()} />
  </Article>
</Component>
